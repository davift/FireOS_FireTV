LOCAL_DIR := $(GET_LOCAL_DIR)
# List of features for this product
#FEATURE_FASTBOOT_EXTENSIONS := true
FEATURE_IDME := true

FEATURE_LIBTOMCRYPT := false
FEATURE_LIBTOMMATH := false
#FEATURE_LIFE_CYCLE_REASONS := true
FEATURE_LK_RAMDUMP := false

FEATURE_UNLOCK := true
# T22 porting TODO FEATURE_SECURE_FLASHING  := true
FEATURE_SECURE_FLASHING  := false
FEATURE_SECURE_BOOT := true
FEATURE_ONETIME_UNLOCK := true

# common for MTK T31 platform
UFBL_PLAT_MTK_T31 := yes
export UFBL_PLAT_MTK_T31
DEFINES += -DUFBL_PLAT_MTK_T31

# for specific changes per project; skipper reuses brandenburg
ifeq ($(TARGET_PRODUCT), duckie)
DEFINES += -DUFBL_PROJ_DUCKIE
else ifeq ($(TARGET_PRODUCT), brandenburg)
DEFINES += -DUFBL_PROJ_BRANDENBURG
else ifeq ($(TARGET_PRODUCT), skipper)
DEFINES += -DUFBL_PROJ_BRANDENBURG
else ifeq ($(TARGET_PRODUCT), anna)
DEFINES += -DUFBL_PROJ_ANNA
else ifeq ($(TARGET_PRODUCT), teddy)
DEFINES += -DUFBL_PROJ_TEDDY
else ifeq ($(TARGET_PRODUCT), hailey)
DEFINES += -DUFBL_PROJ_HAILEY
else ifeq ($(TARGET_PRODUCT), juliana)
DEFINES += -DUFBL_PROJ_JULIANA
else ifeq ($(TARGET_PRODUCT), ABC)
DEFINES += -DUFBL_PROJ_ABC
else ifeq ($(TARGET_PRODUCT), shelly)
DEFINES += -DUFBL_PROJ_SHELLY
else ifeq ($(TARGET_PRODUCT), ABC)
DEFINES += -DUFBL_PROJ_ABC
endif

DEFINES += -DUFBL_PLATFORM_MSTAR
DEFINES += -DCONFIG_USERDATA_IDME_ADDR=0x0
DEFINES += -DCONFIG_IDME_PARTITION_NUM=2
DEFINES += -DUFBL_FEATURE_IDME
ifeq ($(TARGET_PRODUCT), duckie)
# can't change due to DUCKIE already in production
DEFINES += -DIDME_NUM_OF_EMMC_BLOCKS=256
else
# increase default value from brandenburg to make sure we has the larger size
DEFINES += -DIDME_NUM_OF_EMMC_BLOCKS=512
endif

ifeq ($(FEATURE_SECURE_BOOT),true)
FEATURE_COMMON_OPENSSL := false
FEATURE_LIBTOMCRYPT := true
FEATURE_LIBTOMMATH := true
DEFINES += -DUFBL_FEATURE_SECURE_BOOT=1
DEFINES += -DBOARD_AMAZON_KERNEL_SIGNING
else
FEATURE_COMMON_OPENSSL := false
FEATURE_LIBTOMCRYPT := false
FEATURE_LIBTOMMATH := false
endif
ifeq ($(FEATURE_LIBTOMCRYPT),true)
DEFINES += -DMSTAR_SHA256_QUIRK
endif

ifeq ($(FEATURE_UNLOCK),true)
DEFINES += -DUFBL_FEATURE_UNLOCK
endif

ifeq ($(FEATURE_SECURE_FLASHING),true)
DEFINES += -DUFBL_FEATURE_SECURE_FLASHING
endif

ifeq ($(FEATURE_ONETIME_UNLOCK),true)
DEFINES += -DUFBL_FEATURE_ONETIME_UNLOCK
endif

DEFINES += -DIDME_UPDATE_TABLE=1

#export UFBL_DEFINES := $(addprefix -D,$(DEFINES))
export UFBL_DEFINES := $(DEFINES)
export FEATURE_LIBTOMCRYPT FEATURE_LIBTOMMATH FEATURE_SECURE_BOOT

# After defining list of features, include
# ufbl common definitions
include $(LOCAL_DIR)/ufbl_common_uboot.mk
